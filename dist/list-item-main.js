webpackJsonp([0],{41:function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c=b.ADD_FAVORITE="ADD_FAVORITE",d=b.REMOVE_FAVORITE="REMOVE_FAVORITE",e=window.dbPromise=new Promise(function(a,b){var c=window.indexedDB.open("favorites",5);c.onsuccess=function(b){a(b.target.result)},c.onupgradeneeded=function(a){a.target.result.createObjectStore("favorites",{keyPath:"id"})},c.onerror=function(a){b(a)}}),f=b.saveFavorite=function(a){return function(b){e.then(function(c){var d=c.transaction(["favorites"],"readwrite"),e=d.objectStore("favorites"),f=e.add({comments_count:a.comments_count,domain:a.domain,id:a.id,points:a.points,time:a.time,time_ago:a.time_ago,title:a.title,type:a.type,url:a.url,user:a.user});f.onsuccess=function(){b(g(a))}})}},g=function(a){return function(b){b({type:c,item:a})}},h=b.deleteFavorite=function(a){return function(b){e.then(function(c){var e=c.transaction(["favorites"],"readwrite"),f=e.objectStore("favorites"),g=f.delete(a.id);g.onsuccess=function(){b({type:d,item:a})}})}},i=!1,j=b.loadFavorites=function(){return function(a){i||(i=!0,e.then(function(b){var c=b.transaction("favorites").objectStore("favorites");c.openCursor().onsuccess=function(b){var c=b.target.result;c&&(a(g(c.value)),c.continue())}}))}}},42:function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0}),b.DomRepeat=void 0;var g=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(e===void 0){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;return void 0===g?void 0:g.call(d)},h=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(3),j=c(19),k=c(21),l=c(22),m=c(20),n=c(8),o=c(4),p=j.TemplateInstanceBase,q=(0,m.OptionalMutableData)(i.Element),r=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.__instances=[],a.__limit=Infinity,a.__pool=[],a.__renderDebouncer=null,a.__itemsIdxToInstIdx={},a.__chunkCount=null,a.__lastChunkTime=null,a.__sortFn=null,a.__filterFn=null,a.__observePaths=null,a.__ctor=null,a.__isDetached=!0,a.template=null,a}return f(b,a),h(b,null,[{key:"is",get:function(){return"dom-repeat"}},{key:"template",get:function(){return null}},{key:"properties",get:function(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!0,readOnly:!0},initialCount:{type:Number,observer:"__initializeChunking"},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"}}}},{key:"observers",get:function(){return["__itemsChanged(items.*)"]}}]),h(b,[{key:"disconnectedCallback",value:function(){g(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"disconnectedCallback",this).call(this),this.__isDetached=!0;for(var a=0;a<this.__instances.length;a++)this.__detachInstance(a)}},{key:"connectedCallback",value:function(){if(g(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"connectedCallback",this).call(this),this.__isDetached){this.__isDetached=!1;for(var a=this.parentNode,c=0;c<this.__instances.length;c++)this.__attachInstance(c,a)}}},{key:"__ensureTemplatized",value:function(){var a=this;if(!this.__ctor){var b=this.template=this.querySelector("template");if(!b){var c=new MutationObserver(function(){if(a.querySelector("template"))c.disconnect(),a.__render();else throw new Error("dom-repeat requires a <template> child")});return c.observe(this,{childList:!0}),!1}var d={};d[this.as]=!0,d[this.indexAs]=!0,d[this.itemsIndexAs]=!0,this.__ctor=j.Templatize.templatize(b,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:d,forwardHostProp:function(a,b){for(var c,d=this.__instances,e=0;e<d.length&&(c=d[e]);e++)c.forwardHostProp(a,b)},notifyInstanceProp:function(a,b,c){if((0,n.matches)(this.as,b)){var d=a[this.itemsIndexAs];b==this.as&&(this.items[d]=c);var e=(0,n.translate)(this.as,"items."+d,b);this.notifyPath(e,c)}}})}return!0}},{key:"__getMethodHost",value:function(){return this.__dataHost._methodHost||this.__dataHost}},{key:"__sortChanged",value:function(a){var b=this.__getMethodHost();this.__sortFn=a&&("function"==typeof a?a:function(){return b[a].apply(b,arguments)}),this.items&&this.__debounceRender(this.__render)}},{key:"__filterChanged",value:function(a){var b=this.__getMethodHost();this.__filterFn=a&&("function"==typeof a?a:function(){return b[a].apply(b,arguments)}),this.items&&this.__debounceRender(this.__render)}},{key:"__computeFrameTime",value:function(a){return Math.ceil(1e3/a)}},{key:"__initializeChunking",value:function(){this.initialCount&&(this.__limit=this.initialCount,this.__chunkCount=this.initialCount,this.__lastChunkTime=performance.now())}},{key:"__tryRenderChunk",value:function(){this.items&&this.__limit<this.items.length&&this.__debounceRender(this.__requestRenderChunk)}},{key:"__requestRenderChunk",value:function(){var a=this;requestAnimationFrame(function(){return a.__renderChunk()})}},{key:"__renderChunk",value:function(){var a=performance.now(),b=this._targetFrameTime/(a-this.__lastChunkTime);this.__chunkCount=Math.round(this.__chunkCount*b)||1,this.__limit+=this.__chunkCount,this.__lastChunkTime=a,this.__debounceRender(this.__render)}},{key:"__observeChanged",value:function(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ")}},{key:"__itemsChanged",value:function(a){this.items&&!Array.isArray(this.items)&&console.warn("dom-repeat expected array for `items`, found",this.items),this.__handleItemPath(a.path,a.value)||(this.__initializeChunking(),this.__debounceRender(this.__render))}},{key:"__handleObservedPaths",value:function(a){if(this.__observePaths){a=a.substring(a.indexOf(".")+1);for(var b=this.__observePaths,c=0;c<b.length;c++)if(0===a.indexOf(b[c]))return this.__debounceRender(this.__render,this.delay),!0}}},{key:"__debounceRender",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;this.__renderDebouncer=k.Debouncer.debounce(this.__renderDebouncer,0<b?o.timeOut.after(b):o.microTask,a.bind(this)),(0,l.enqueueDebouncer)(this.__renderDebouncer)}},{key:"render",value:function(){this.__debounceRender(this.__render),(0,l.flush)()}},{key:"__render",value:function(){this.__ensureTemplatized()&&(this.__applyFullRefresh(),this.__pool.length=0,this._setRenderedItemCount(this.__instances.length),this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this.__tryRenderChunk())}},{key:"__applyFullRefresh",value:function(){for(var c=this,d=this.items||[],a=Array(d.length),b=0;b<d.length;b++)a[b]=b;this.__filterFn&&(a=a.filter(function(a,b,e){return c.__filterFn(d[a],b,e)})),this.__sortFn&&a.sort(function(e,a){return c.__sortFn(d[e],d[a])});for(var e=this.__itemsIdxToInstIdx={},f=0,g=Math.min(a.length,this.__limit);f<g;f++){var h=this.__instances[f],i=a[f],j=d[i];e[i]=f,h&&f<this.__limit?(h._setPendingProperty(this.as,j),h._setPendingProperty(this.indexAs,f),h._setPendingProperty(this.itemsIndexAs,i),h._flushProperties()):this.__insertInstance(j,f,i)}for(var k=this.__instances.length-1;k>=f;k--)this.__detachAndRemoveInstance(k)}},{key:"__detachInstance",value:function(a){for(var b,c=this.__instances[a],d=0;d<c.children.length;d++)b=c.children[d],c.root.appendChild(b);return c}},{key:"__attachInstance",value:function(a,b){var c=this.__instances[a];b.insertBefore(c.root,this)}},{key:"__detachAndRemoveInstance",value:function(a){var b=this.__detachInstance(a);b&&this.__pool.push(b),this.__instances.splice(a,1)}},{key:"__stampInstance",value:function(a,b,c){var d={};return d[this.as]=a,d[this.indexAs]=b,d[this.itemsIndexAs]=c,new this.__ctor(d)}},{key:"__insertInstance",value:function(a,b,c){var d=this.__pool.pop();d?(d._setPendingProperty(this.as,a),d._setPendingProperty(this.indexAs,b),d._setPendingProperty(this.itemsIndexAs,c),d._flushProperties()):d=this.__stampInstance(a,b,c);var e=this.__instances[b+1],f=e?e.children[0]:this;return this.parentNode.insertBefore(d.root,f),this.__instances[b]=d,d}},{key:"_showHideChildren",value:function(a){for(var b=0;b<this.__instances.length;b++)this.__instances[b]._showHideChildren(a)}},{key:"__handleItemPath",value:function(a,b){var c=a.slice(6),d=c.indexOf("."),e=0>d?c:c.substring(0,d);if(e==parseInt(e,10)){var f=0>d?"":c.substring(d+1);this.__handleObservedPaths(f);var g=this.__itemsIdxToInstIdx[e],h=this.__instances[g];if(h){var i=this.as+(f?"."+f:"");h._setPendingPropertyOrPath(i,b,!1,!0),h._flushProperties()}return!0}}},{key:"itemForElement",value:function(a){var b=this.modelForElement(a);return b&&b[this.as]}},{key:"indexForElement",value:function(a){var b=this.modelForElement(a);return b&&b[this.indexAs]}},{key:"modelForElement",value:function(a){return j.Templatize.modelForElement(this.template,a)}}]),b}(q);customElements.define(r.is,r),b.DomRepeat=r},43:function(a,b,c){"use strict";function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}Object.defineProperty(b,"__esModule",{value:!0}),b.currentItemSelector=b.itemsSelector=void 0;var e=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},f=c(46),g=c(41),h=c(16),i=c(7),j=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=arguments[1];switch(b.type){case f.REQUEST_ITEM:return e({},a,{id:b.itemId,failure:!1,isFetching:!0});case f.RECEIVE_ITEM:return e({},a,{failure:!1,isFetching:!1},b.data);case f.FAIL_ITEM:return e({},a,{failure:!0,isFetching:!1});default:return a;}};b.default=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=arguments[1];switch(b.type){case f.REQUEST_ITEM:case f.RECEIVE_ITEM:case f.FAIL_ITEM:var c=b.itemId;return e({},a,d({},c,j(a[c],b)));case"RECEIVE_LIST":return b.items.reduce(function(a,b){return a[b.id]=b,a},e({},a));case g.ADD_FAVORITE:return e({},a,d({},b.item.id,b.item));default:return a;}};var k=b.itemsSelector=function(a){return a.items},l=b.currentItemSelector=(0,h.createSelector)(k,i.splitPathnameSelector,i.urlSearchParamsSelector,function(a,b,c){switch(b[0]){case"item":var d=c.get("id");return a[d]||{id:d};default:return null;}})},44:function(a,b,c){"use strict";function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}Object.defineProperty(b,"__esModule",{value:!0}),b.favoritesSelector=void 0;var e=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},f=c(41);b.default=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=arguments[1];switch(b.type){case f.ADD_FAVORITE:return e({},a,d({},b.item.id,!0));case f.REMOVE_FAVORITE:var c=e({},a);return delete c[b.item.id],c;default:return a;}};b.favoritesSelector=function(a){return a.favorites}},46:function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c=b.REQUEST_ITEM="REQUEST_ITEM",d=b.RECEIVE_ITEM="RECEIVE_ITEM",e=b.FAIL_ITEM="FAIL_ITEM",f=b.fetchItem=function(a){return function(b){b(h(a.id)),fetch("/api/item/"+a.id).then(function(a){return a.json()}).then(function(c){return b(i(a.id,c))}).catch(function(){return b(j(a.id))})}},g=b.fetchItemIfNeeded=function(a){return function(b){!a||a.comments||a.isFetching||b(f(a))}},h=function(a){return{type:c,itemId:a}},i=function(a,b){return{type:d,itemId:a,data:b}},j=function(a){return{type:e,itemId:a}}},47:function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0}),b.HnSummaryElement=void 0;var g=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(3),i=c(15),j=c(41),k=c(6),l=b.HnSummaryElement=function(a){function b(){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return f(b,a),g(b,[{key:"_getItemHref",value:function(a){return a&&a.id?"/item?id="+a.id:null}},{key:"_getUserHref",value:function(a){return a&&a.user?"/user?id="+a.user:null}},{key:"_markItem",value:function(){i.store.dispatch((0,j.saveFavorite)(this.item))}},{key:"_unmarkItem",value:function(){i.store.dispatch((0,j.deleteFavorite)(this.item))}}],[{key:"template",get:function(){return"\n    "+k.sharedStyles+"\n    <style>\n      :host {\n        display: block;\n        margin: 1em 0;\n      }\n    </style>\n    <a href$=\"[[item.url]]\">[[item.title]]</a>\n    <span class=\"domain\">([[item.domain]])</span>\n    <div class=\"info\">\n      [[item.points]] points by\n      <a href$=\"[[_getUserHref(item)]]\">[[item.user]]</a>\n      [[item.time_ago]]\n      <span class=\"spacer\">|</span>\n      <a href$=\"[[_getItemHref(item)]]\">[[item.comments_count]] comments</a>\n      <button hidden$=\"[[isFavorite]]\" on-click=\"_markItem\">Mark</button>\n      <button hidden$=\"[[!isFavorite]]\" on-click=\"_unmarkItem\">Unmark</button>\n    </div>\n    "}},{key:"properties",get:function(){return{item:Object,isFavorite:Boolean}}}]),b}(h.Element);customElements.define("hn-summary",l)}});